#! /bin/bash
urls=()
while IFS= read -r line; do
    urls+=("$line")
done < "${HOME}/Downloads/youtube_urls.txt"
length=${#urls[@]}

if [ -z ${dir} ] ; then
    echo -ne "wd not specified.\nEnter path: "
    read dir
fi

echo wd: $dir

cd ${dir}

start=$(date | awk '{print $4}')
for ((i=0; i <= ${length}; i++)); do
    echo -ne "\rDownload in progress ... ${w} [ ${i} / ${length} ] complete."
    yt-dlp --format "bv*[ext=mp4]+ba[ext=m4a]/b[ext=mp4]" ${urls[$i]} &>/dev/null
done

stop=$(date|awk '{print $4}')
echo ; echo "Download Complete."
printf '#%.0s' {1..46} ; echo
time_elapsed=$(echo -e "${start}\n${stop}" | awk 'BEGIN {FS=":"; diff=0} {diff=$2 - diff} END {print diff}')

# if [ $time_elapsed -lt 1 ]; then
#     changetitle 1
# else
#     changetitle "${time_elapsed}"
# fi

IFS=${IFS_OLD}
